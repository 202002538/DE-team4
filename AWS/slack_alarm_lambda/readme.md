# 📌 README: Slack 알림 Lambda (화제도 알림)

이 문서는 **S3에서 업로드된 CSV 파일을 감지하고, Slack으로 알림 보내는 Lambda 함수**에 대한 설명을 포함합니다.  
Lambda는 **S3 이벤트를 기반으로 실행되며, CSV 데이터에 담긴 화제도가 높은 게시글을 Slack에 보고**하는 역할을 수행합니다.

---

## 🛠 1. 개요
이 Lambda 함수는 **S3의 `transformed_data/alarm/` 폴더에 새로운 CSV 파일이 업로드될 때 실행**됩니다.  

### 📌 기능 요약
1. **S3 이벤트 트리거** → `transformed_data/alarm/` 경로의 CSV 파일 업로드 감지  
2. **CSV 파일을 S3에서 로드** → `pandas`를 이용하여 데이터프레임 변환  
4. **Slack 메시지 구성** → **차종 + 화제도 + 제목 + url ** 형식으로 알림 메시지 생성  
5. **Slack Webhook으로 메시지 전송**  
6. **전송 성공/실패 여부 출력**  

---

## 📂 2. 환경 변수
Lambda 실행을 위해 **아래 환경 변수를 설정해야 합니다.**

| 환경 변수명         | 설명 |
|--------------------|------|
| `SLACK_WEBHOOK_URL` | Slack 메시지를 전송할 Webhook URL |
| `THRESHOLD`        | 화제도 기준 임계값 (기본값: 15) |

---

## 🛑 3. 오류 처리
- **Slack Webhook URL이 누락된 경우** → 오류 메시지 출력 후 실행 종료  
- **S3에서 CSV 파일 로드 실패 시** → 오류 메시지 출력 후 실행 종료  
- **CSV 데이터가 비어있는 경우** → "보고할 데이터 없음" 메시지 출력 후 종료  
- **Slack 메시지 전송 실패 시** → 응답 상태 코드 및 실패 이유 출력  

---

✅ **이 Lambda는 화제도 높은 게시글을 Slack으로 실시간 보고하는 역할을 수행합니다.**  
⚡ **자동화된 인기 게시글 알림을 통해 빠르게 트렌드를 파악할 수 있습니다!** 🚀
